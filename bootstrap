#! /usr/bin/env bash

set -e

if test ! "$(command -v gcc)"; then
  echo "Installing XCode..."
  xcode-select --install
fi

echo "Installing Homebrew..."
if test ! "$(command -v brew)"; then
  ruby -e "$(curl -fsSL
  https://raw.githubusercontent.com/Homebrew/install/master/install)" | while read -r line; do echo "$line"; done
else
  while read -r brw; do
    echo "${brw}"
  done < <(brew update)
  echo ''
fi

echo "Installing Git submodules..."
while read -r sm; do
  echo "${sm}"
done < <(git submodule update --init --recursive)
echo ''

"$(brew --prefix)/opt/fzf/install --all"
